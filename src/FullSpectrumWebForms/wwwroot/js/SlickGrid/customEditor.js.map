{"version":3,"file":"customEditor.js","sourceRoot":"","sources":["customEditor.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"../controls/html/dataGrid.ts\" />\r\n\r\nnamespace Slick.Editors {\r\n\r\n    export function CustomCheckboxEditor(args) {\r\n        var $input: JQuery;\r\n        var defaultValue;\r\n        var scope = this;\r\n\r\n        this.init = function () {\r\n            $input = $(\"<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>\");\r\n            $input.appendTo(args.container);\r\n            $input.focus();\r\n        };\r\n\r\n        this.setValue = function (val) {\r\n            $input.prop('checked', !!val);\r\n        };\r\n\r\n        this.destroy = function () {\r\n            $input.remove();\r\n        };\r\n\r\n        this.focus = function () {\r\n            $input.focus();\r\n        };\r\n\r\n        this.loadValue = function (item) {\r\n            defaultValue = !!(args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column);\r\n            if (defaultValue) {\r\n                $input.prop('checked', true);\r\n            } else {\r\n                $input.prop('checked', false);\r\n            }\r\n        };\r\n\r\n        this.serializeValue = function () {\r\n            return $input.prop('checked');\r\n        };\r\n\r\n        this.applyValue = function (item, state) {\r\n            var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n            if (!columnDef.field)\r\n                return '';\r\n            var names = columnDef.field.split('.');\r\n            if (names.length == 1) {\r\n                item[args.column.field] = state;\r\n                return;\r\n            }\r\n            var val = item[names[0]];\r\n\r\n            for (var i = 1; i < names.length - 1; i++) {\r\n                if (val && typeof val == 'object' && names[i] in val)\r\n                    val = val[names[i]];\r\n                else\r\n                    val = '';\r\n            }\r\n            val[names[names.length - 1]] = state;\r\n        };\r\n\r\n        this.isValueChanged = function () {\r\n            return (this.serializeValue() !== defaultValue);\r\n        };\r\n\r\n        this.validate = function () {\r\n            return {\r\n                valid: true,\r\n                msg: null\r\n            };\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    export function ButtonEditor(args) {\r\n\r\n        this.init = function () {\r\n            setTimeout(function () {\r\n                args.commitChanges();\r\n            }, 1);\r\n        };\r\n\r\n        this.setValue = function (val) {\r\n\r\n        };\r\n\r\n        this.destroy = function () {\r\n\r\n        };\r\n\r\n        this.focus = function () {\r\n\r\n        };\r\n\r\n        this.loadValue = function (item) {\r\n\r\n        };\r\n\r\n        this.serializeValue = function () {\r\n\r\n        };\r\n\r\n        this.applyValue = function (item, state) {\r\n\r\n        };\r\n\r\n        this.isValueChanged = function () {\r\n            return false;\r\n        };\r\n\r\n        this.validate = function () {\r\n            return {\r\n                valid: true,\r\n                msg: null\r\n            };\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n\r\n    export interface Select2EditorOptions {\r\n        UseLargeDropDown?: boolean;\r\n    }\r\n    var fixSelect2MissingTab = function (event) {\r\n        var $selected_id_field = $(event.target);\r\n\r\n        var selectHighlighted = function (e) {\r\n            if (e.which === 9) {\r\n                var highlighted = $selected_id_field.data('select2').$dropdown.find('.select2-results__option--highlighted');\r\n\r\n                if (highlighted) {\r\n                    var data = highlighted.data('data');\r\n                    if (data) {\r\n                        var vals = $selected_id_field.val() as any[];\r\n                        if (vals === null) {\r\n                            vals = [];\r\n                        }\r\n                        let valueToSet = gen_utility.select2.isAjax($selected_id_field) ? data : data.id;\r\n                        if (vals.constructor === Array) {\r\n                            vals.push(valueToSet);\r\n                        }\r\n                        else\r\n                            vals = valueToSet;\r\n\r\n                        let tabListener = $selected_id_field.data('select2')['tabListener'];\r\n                        if (tabListener)\r\n                            tabListener[0] = true;\r\n\r\n                        if (gen_utility.select2.isAjax($selected_id_field) || gen_utility.select2.isTags($selected_id_field)) {\r\n                            var arr: any[] = vals.constructor === Array ? vals : [vals];\r\n                            gen_utility.select2.setValue($selected_id_field, arr.map(x => x.value), arr.map(x => x.id));\r\n                        }\r\n                        else\r\n                            gen_utility.select2.setSelectedById($selected_id_field, vals);\r\n\r\n                        $selected_id_field.trigger(\"change\");\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        $('.select2-search__field').on('keydown', selectHighlighted);\r\n    }\r\n\r\n    $(document).on('select2:open', 'select', function (e) { fixSelect2MissingTab(e) });\r\n    $(document).on('select2:close', 'select', function (e) {\r\n        //unbind to prevent multiple\r\n        setTimeout(function () {\r\n            $('.select2-search__field').off('keydown');\r\n        }, 10);\r\n    });\r\n\r\n    export function Select2(select2Options, projectFeeder?: boolean, options?: Select2EditorOptions) {\r\n        return function Select2(args) {\r\n            var $input: JQuery;\r\n            var defaultValue;\r\n            var scope = this;\r\n\r\n            var tabListener = [false];\r\n            this.setSearchContent = function (text: string) {\r\n                $input.select2('open');\r\n                var $search = $input.data('select2').dropdown.$search || $input.data('select2').selection.$search;\r\n                $search.val(text);\r\n                $search.trigger('input');\r\n            }\r\n\r\n            this.init = function () {\r\n\r\n                $input = $(\"<select style='width:100%; display:none; left: -5px; top: -8px' />\")\r\n                    .appendTo(args.container)\r\n                    .on(\"keydown.nav\", function (e) {\r\n                        if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\r\n                            e.stopImmediatePropagation();\r\n                        }\r\n                    }).on('select2:close', function () {\r\n                        $(this).focus();\r\n                        setTimeout(function () { // set a timeout so we don't destroy the select2 while inside an event of the same select2\r\n                            args.commitChanges();\r\n\r\n                            if (tabListener[0]) {\r\n                                let grid = args.grid as Slick.Grid<gen.treeTableData>;\r\n                                let nextCell = grid.getActiveCell().cell + 1;\r\n                                let nextRow = grid.getActiveCell().row;\r\n                                if (nextCell >= grid.getColumns().length) {\r\n                                    nextCell = 0;\r\n                                    nextRow += 1;\r\n                                }\r\n                                grid.setActiveCell(nextRow, nextCell);\r\n                            }\r\n\r\n                        }, 1);\r\n                    });\r\n                $input.select2($.extend({}, select2Options, options && options.UseLargeDropDown ? {\r\n                    dropdownCssClass: 'bigDropDrown'\r\n                } : {})).next('.select2').css({\r\n                    'left': '-5px',\r\n                    'top': '-8px',\r\n                    width: '112%'\r\n                });\r\n\r\n                $input.data('select2')['tabListener'] = tabListener;\r\n            };\r\n\r\n            this.destroy = function () {\r\n                $input.select2('destroy');\r\n                $input.remove();\r\n            };\r\n\r\n            this.focus = function () {\r\n                $input.focus();\r\n            };\r\n\r\n            this.getValue = function () {\r\n                if (gen_utility.select2.isAjax($input)) {\r\n                    if (gen_utility.select2.isMultiple($input))\r\n                        return gen_utility.select2.getSelectedValuesAndIds($input);\r\n                    else\r\n                        return gen_utility.select2.getSelectedValuesAndIds($input)[0];\r\n                }\r\n                if (projectFeeder)\r\n                    return gen_utility.select2.getSelectedText($input);\r\n                else if (gen_utility.select2.isMultiple($input))\r\n                    return gen_utility.select2.getSelectedIDs($input);\r\n                else\r\n                    return gen_utility.select2.getSelectedID($input);\r\n            };\r\n\r\n            this.setValue = function (val) {\r\n                gen_utility.select2.setSelectedById($input, val);\r\n            };\r\n\r\n            this.loadValue = function (item) {\r\n                defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n                if (gen_utility.select2.isAjax($input)) {\r\n                    if (gen_utility.select2.isMultiple($input)) {\r\n                        var v = defaultValue as { [id: string]: string };\r\n                        var keys = Object.keys(v);\r\n                        gen_utility.select2.setSelectedBySelector($input, keys, x => {\r\n                            return {\r\n                                id: x,\r\n                                value: v[x]\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        defaultValue = {\r\n                            id: defaultValue.Key || defaultValue.id,\r\n                            value: defaultValue.Value || defaultValue.value\r\n                        };\r\n                        gen_utility.select2.setSelected($input, defaultValue.value, defaultValue.id);\r\n                    }\r\n                }\r\n                else {\r\n                    if (typeof defaultValue !== 'string' && !gen_utility.select2.isMultiple($input) && !gen_utility.select2.isAjax($input))\r\n                        defaultValue = defaultValue.toString();\r\n                    gen_utility.select2.setSelectedById($input, defaultValue);\r\n                }\r\n                $input.select2('open');\r\n            };\r\n\r\n            this.serializeValue = function () {\r\n                return this.getValue();\r\n            };\r\n\r\n            this.applyValue = function (item, state) {\r\n                var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n                if (!columnDef.field)\r\n                    return '';\r\n                var names = columnDef.field.split('.');\r\n                if (names.length == 1) {\r\n                    item[args.column.field] = state;\r\n                    return;\r\n                }\r\n                var val = item[names[0]];\r\n\r\n                for (var i = 1; i < names.length - 1; i++) {\r\n                    if (val && typeof val == 'object' && names[i] in val)\r\n                        val = val[names[i]];\r\n                    else\r\n                        val = '';\r\n                }\r\n                val[names[names.length - 1]] = state;\r\n            };\r\n\r\n            this.isValueChanged = function () {\r\n                if (gen_utility.select2.isAjax($input)) {\r\n                    if (gen_utility.select2.isMultiple($input)) {\r\n                        let values = gen_utility.select2.getSelectedValuesAndIds($input);\r\n                        let oldKeys = Object.keys(defaultValue);\r\n                        if ((!values || values.length == 0) && (!oldKeys || oldKeys.length == 0))\r\n                            return false;\r\n                        if (values.length != oldKeys.length)\r\n                            return true;\r\n                        return !!values.find(x => oldKeys.indexOf(x.id) == -1);\r\n                    }\r\n                    else {\r\n                        let newValue = gen_utility.select2.getSelectedID($input);\r\n                        if ((!newValue || newValue == '') && !defaultValue.id)\r\n                            return false;\r\n                        return newValue != defaultValue.id;\r\n                    }\r\n                }\r\n                if (gen_utility.select2.isMultiple($input)) {\r\n                    let newValue = gen_utility.select2.getSelectedIDs($input);\r\n                    if (newValue.length == 0 && (defaultValue == null || defaultValue.length == 0))\r\n                        return false;\r\n                    return newValue.length != defaultValue.length || !!newValue.find(x => (defaultValue as string[]).indexOf(x) == -1);\r\n\r\n                }\r\n                let inputIsEmpty = $input.val() == '' || $input.val() == null;\r\n                let defaultValueIsEmpty = defaultValue == '' || defaultValue == null;\r\n                if (defaultValueIsEmpty)\r\n                    return !inputIsEmpty;\r\n                return $input.val() != defaultValue;\r\n            };\r\n\r\n            this.validate = function () {\r\n                if (args.column.validator) {\r\n                    var validationResults = args.column.validator(this.getValue(), args);\r\n                    if (!validationResults.valid) {\r\n                        return validationResults;\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    valid: true,\r\n                    msg: null\r\n                };\r\n            };\r\n\r\n            this.init();\r\n        };\r\n    }\r\n\r\n    export function CustomTimePickerEditor(options: {\r\n        EditorFormat: string,\r\n        Format: string,\r\n        Step: number,\r\n        MinTime: string,\r\n        MaxTime: string,\r\n    }) {\r\n        return function (args) {\r\n            var $input;\r\n            var defaultValue;\r\n            var scope = this;\r\n\r\n            this.init = function () {\r\n                $input = $(\"<INPUT type=text class='editor-text' style='width:100%; top:-2px' />\")\r\n                    .appendTo(args.container)\r\n                    .on(\"keydown.nav\", function (e) {\r\n                        if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\r\n                            e.stopImmediatePropagation();\r\n                        }\r\n                    })\r\n                    .focus()\r\n                    .select();\r\n\r\n                var timePickerOptions = {\r\n                    timeFormat: options.EditorFormat,\r\n                    step: options.Step,\r\n                };\r\n                if (options.MinTime && options.MinTime != '')\r\n                    (timePickerOptions as any).maxTime = options.MinTime;\r\n                if (options.MaxTime && options.MaxTime != '')\r\n                    (timePickerOptions as any).minTime = options.MaxTime;\r\n\r\n                $input.timepicker(timePickerOptions);\r\n\r\n                let that = this;\r\n\r\n                $input.on('hideTimepicker', function () {\r\n                    $(this).focus();\r\n\r\n                    setTimeout(function () {\r\n                        if (that.isValueChanged()) {\r\n\r\n                            args.commitChanges();\r\n\r\n                            let grid = args.grid;\r\n                            let nextCell = grid.getActiveCell().cell;\r\n                            let nextRow = grid.getActiveCell().row;\r\n\r\n                            grid.setActiveCell(nextRow, nextCell);\r\n                        }\r\n                    }, 1);\r\n                });\r\n\r\n            };\r\n\r\n            this.destroy = function () {\r\n                $input.timepicker('remove');\r\n                $input.remove();\r\n            };\r\n\r\n            this.focus = function () {\r\n                $input.focus();\r\n                $input.timepicker('show');\r\n            };\r\n\r\n            this.getValue = function () {\r\n                return $input.timepicker('getTime');\r\n            };\r\n\r\n            this.setValue = function (val) {\r\n                $input.timepicker('setTime', val);\r\n            };\r\n\r\n            this.parseDefaultValue = function () {\r\n\r\n                let duration: moment.Duration = null;\r\n                if (defaultValue && defaultValue != '') {\r\n                    if (typeof defaultValue == 'number')\r\n                        duration = moment.duration(defaultValue, 'hours');\r\n                    else if (!defaultValue.includes(':'))\r\n                        duration = moment.duration(+defaultValue, 'hours');\r\n                    else\r\n                        duration = moment.duration(defaultValue);\r\n                }\r\n                return duration;\r\n            }\r\n\r\n            this.loadValue = function (item) {\r\n                defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n\r\n                let duration: moment.Duration = this.parseDefaultValue();\r\n                if (duration)\r\n                    this.setValue(moment().startOf('day').add(duration).toDate());\r\n\r\n                $input.select();\r\n                $input.timepicker('show');\r\n            };\r\n\r\n            this.serializeValue = function () {\r\n                if ($input.val() == '')\r\n                    return null;\r\n                return moment.duration(moment(this.getValue()).diff(moment().startOf('day'))).asHours();\r\n            };\r\n\r\n            this.applyValue = function (item, state) {\r\n                var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n                if (!columnDef.field)\r\n                    return '';\r\n                var names = columnDef.field.split('.');\r\n                if (names.length == 1) {\r\n                    item[args.column.field] = state;\r\n                    return;\r\n                }\r\n                var val = item[names[0]];\r\n\r\n                for (var i = 1; i < names.length - 1; i++) {\r\n                    if (val && typeof val == 'object' && names[i] in val)\r\n                        val = val[names[i]];\r\n                    else\r\n                        val = '';\r\n                }\r\n                val[names[names.length - 1]] = state;\r\n            };\r\n\r\n            this.isValueChanged = function () {\r\n                let defaultValue: moment.Duration = this.parseDefaultValue();\r\n                if (defaultValue == null && $input.val() == '')\r\n                    return false;\r\n                return !moment().startOf('day').add(defaultValue).isSame(this.getValue());\r\n            };\r\n\r\n            this.validate = function () {\r\n                if (args.column.validator) {\r\n                    var validationResults = args.column.validator(this.getValue(), args);\r\n                    if (!validationResults.valid) {\r\n                        return validationResults;\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    valid: true,\r\n                    msg: null\r\n                };\r\n            };\r\n\r\n            this.init();\r\n        }\r\n    };\r\n    export function CustomTextEditor(args) {\r\n        var $input;\r\n        var defaultValue;\r\n        var scope = this;\r\n\r\n        this.init = function () {\r\n            $input = $(\"<INPUT type=text class='editor-text' style='width:100%; top:-2px' />\")\r\n                .appendTo(args.container)\r\n                .on(\"keydown.nav\", function (e) {\r\n                    if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\r\n                        e.stopImmediatePropagation();\r\n                    }\r\n                })\r\n                .focus()\r\n                .select();\r\n\r\n        };\r\n\r\n        this.destroy = function () {\r\n            $input.remove();\r\n        };\r\n\r\n        this.focus = function () {\r\n            $input.focus();\r\n        };\r\n\r\n        this.getValue = function () {\r\n            return $input.val();\r\n        };\r\n\r\n        this.setValue = function (val) {\r\n            $input.val(val);\r\n        };\r\n\r\n        this.loadValue = function (item) {\r\n            defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n            $input.val(defaultValue);\r\n            $input[0].defaultValue = defaultValue;\r\n            $input.select();\r\n        };\r\n\r\n        this.serializeValue = function () {\r\n            return $input.val();\r\n        };\r\n\r\n        this.applyValue = function (item, state) {\r\n            var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n            if (!columnDef.field)\r\n                return '';\r\n            var names = columnDef.field.split('.');\r\n            if (names.length == 1) {\r\n                item[args.column.field] = state;\r\n                return;\r\n            }\r\n            var val = item[names[0]];\r\n\r\n            for (var i = 1; i < names.length - 1; i++) {\r\n                if (val && typeof val == 'object' && names[i] in val)\r\n                    val = val[names[i]];\r\n                else\r\n                    val = '';\r\n            }\r\n            val[names[names.length - 1]] = state;\r\n        };\r\n\r\n        this.isValueChanged = function () {\r\n            return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\r\n        };\r\n\r\n        this.validate = function () {\r\n            if (args.column.validator) {\r\n                var validationResults = args.column.validator($input.val(), args);\r\n                if (!validationResults.valid) {\r\n                    return validationResults;\r\n                }\r\n            }\r\n\r\n            return {\r\n                valid: true,\r\n                msg: null\r\n            };\r\n        };\r\n\r\n        this.init();\r\n    }\r\n    export function timeSpanHoursEditor(args) {\r\n        var $input;\r\n        var defaultValue;\r\n        var scope = this;\r\n\r\n        this.init = function () {\r\n            $input = $(\"<INPUT type=text class='editor-text' style='width:100%; top:-2px' />\")\r\n                .appendTo(args.container)\r\n                .on(\"keydown.nav\", function (e) {\r\n                    if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\r\n                        e.stopImmediatePropagation();\r\n                    }\r\n                })\r\n                .focus()\r\n                .select();\r\n\r\n        };\r\n\r\n        this.destroy = function () {\r\n            $input.remove();\r\n        };\r\n\r\n        this.focus = function () {\r\n            $input.focus();\r\n        };\r\n\r\n        this.getValue = function () {\r\n            return $input.val();\r\n        };\r\n\r\n        this.setValue = function (val) {\r\n            $input.val(val);\r\n        };\r\n\r\n        this.loadValue = function (item) {\r\n            defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n            if (defaultValue != '')\r\n                defaultValue = moment.duration(defaultValue).asHours().toString();\r\n\r\n            $input.val(defaultValue);\r\n            $input[0].defaultValue = defaultValue;\r\n            $input.select();\r\n        };\r\n\r\n        this.serializeValue = function () {\r\n            return $input.val();\r\n        };\r\n\r\n        this.applyValue = function (item, state) {\r\n            var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n            if (!columnDef.field)\r\n                return '';\r\n            var names = columnDef.field.split('.');\r\n            if (names.length == 1) {\r\n                item[args.column.field] = state;\r\n                return;\r\n            }\r\n            var val = item[names[0]];\r\n\r\n            for (var i = 1; i < names.length - 1; i++) {\r\n                if (val && typeof val == 'object' && names[i] in val)\r\n                    val = val[names[i]];\r\n                else\r\n                    val = '';\r\n            }\r\n            val[names[names.length - 1]] = state;\r\n        };\r\n\r\n        this.isValueChanged = function () {\r\n            return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\r\n        };\r\n\r\n        this.validate = function () {\r\n            if (args.column.validator) {\r\n                var validationResults = args.column.validator($input.val(), args);\r\n                if (!validationResults.valid) {\r\n                    return validationResults;\r\n                }\r\n            }\r\n\r\n            return {\r\n                valid: true,\r\n                msg: null\r\n            };\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    export function PikadayEditor(args) {\r\n        var $input;\r\n        var defaultValue;\r\n        var scope = this;\r\n        var elementPikaday: any;\r\n        this.init = function () {\r\n            $input = $(\"<input class=\\\"editor-text\\\" style='width:100%; top:-2px' />\")\r\n                .appendTo(args.container)\r\n                .on(\"keydown.nav\", function (e) {\r\n                    if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\r\n                        e.stopImmediatePropagation();\r\n                    }\r\n                })\r\n                .focus()\r\n                .select();\r\n\r\n            let that = this;\r\n            elementPikaday = new Pikaday({\r\n                field: $input[0],\r\n                onSelect: function () {\r\n                    if (that.isValueChanged()) {\r\n                        args.commitChanges();\r\n                        that.destroy();\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        this.destroy = function () {\r\n            $input.remove();\r\n            elementPikaday.destroy();\r\n        };\r\n\r\n        this.focus = function () {\r\n            $input.focus();\r\n        };\r\n\r\n        this.getValue = function () {\r\n            return $input.val();\r\n        };\r\n\r\n        this.setValue = function (val) {\r\n            if (val != null && val != \"\")\r\n                elementPikaday.setMoment(moment(val));\r\n            else\r\n                elementPikaday.setDate(null);\r\n        };\r\n\r\n        this.loadValue = function (item) {\r\n            defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n            if (defaultValue != '')\r\n                defaultValue = moment(defaultValue).startOf('day').add(1, 's');\r\n\r\n            this.setValue(defaultValue);\r\n            $input.select();\r\n            elementPikaday.show();\r\n        };\r\n\r\n        this.serializeValue = function () {\r\n            if ($input.val() == '')\r\n                return null;\r\n            var momentObj = elementPikaday.getMoment() as moment.Moment;\r\n            if (!momentObj.isValid()) {\r\n                momentObj = moment($input.val());\r\n                if (!momentObj.isValid())\r\n                    return null;\r\n            }\r\n            return momentObj.toISOString();\r\n        };\r\n\r\n        this.applyValue = function (item, state) {\r\n            var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n            if (!columnDef.field)\r\n                return '';\r\n            var names = columnDef.field.split('.');\r\n            if (names.length == 1) {\r\n                item[args.column.field] = state;\r\n                return;\r\n            }\r\n            var val = item[names[0]];\r\n\r\n            for (var i = 1; i < names.length - 1; i++) {\r\n                if (val && typeof val == 'object' && names[i] in val)\r\n                    val = val[names[i]];\r\n                else\r\n                    val = '';\r\n            }\r\n            val[names[names.length - 1]] = state;\r\n        };\r\n\r\n        this.isValueChanged = function () {\r\n            if ($input.val() == '')\r\n                return defaultValue != '';\r\n            var date = elementPikaday.getMoment().startOf('day');\r\n            return !moment(defaultValue).startOf('day').isSame(date);// prevent raising useless event from client to server\r\n        };\r\n\r\n        this.validate = function () {\r\n            if (args.column.validator) {\r\n                var validationResults = args.column.validator($input.val(), args);\r\n                if (!validationResults.valid) {\r\n                    return validationResults;\r\n                }\r\n            }\r\n\r\n            return {\r\n                valid: true,\r\n                msg: null\r\n            };\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    export function AutoCompleteTextEditor(SourceData: string[]) {\r\n        return function AutoCompleteTextEditor(args) {\r\n            var $input: JQuery;\r\n            var defaultValue;\r\n            var scope = this;\r\n\r\n            this.init = function () {\r\n                $input = $(\"<INPUT style='width:100%; top:-2px' />\")\r\n                    .appendTo(args.container)\r\n                    .on(\"keydown.nav\", function (e) {\r\n                        if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT || e.keyCode === $.ui.keyCode.DOWN || e.keyCode === $.ui.keyCode.UP) {\r\n                            e.stopImmediatePropagation();\r\n                        }\r\n                    })\r\n                    .focus()\r\n                    .select();\r\n                $input.autocomplete({\r\n                    autoFocus: true,\r\n                    source: SourceData,\r\n                });\r\n            };\r\n\r\n            this.destroy = function () {\r\n                $input.remove();\r\n            };\r\n\r\n            this.focus = function () {\r\n                $input.focus();\r\n            };\r\n\r\n            this.getValue = function () {\r\n                return $input.val();\r\n            };\r\n\r\n            this.setValue = function (val) {\r\n                $input.val(val);\r\n            };\r\n\r\n            this.loadValue = function (item) {\r\n                defaultValue = (args.grid as Slick.Grid<Slick.SlickData>).getOptions().dataItemColumnValueExtractor(item, args.column) || \"\";\r\n                $input.val(defaultValue);\r\n                ($input[0] as any).defaultValue = defaultValue;\r\n                $input.select();\r\n            };\r\n\r\n            this.serializeValue = function () {\r\n                return $input.val();\r\n            };\r\n\r\n            this.applyValue = function (item, state) {\r\n                var columnDef: Slick.Column<Slick.SlickData> = args.column;\r\n                if (!columnDef.field)\r\n                    return '';\r\n                var names = columnDef.field.split('.');\r\n                if (names.length == 1) {\r\n                    item[args.column.field] = state;\r\n                    return;\r\n                }\r\n                var val = item[names[0]];\r\n\r\n                for (var i = 1; i < names.length - 1; i++) {\r\n                    if (val && typeof val == 'object' && names[i] in val)\r\n                        val = val[names[i]];\r\n                    else\r\n                        val = '';\r\n                }\r\n                val[names[names.length - 1]] = state;\r\n            };\r\n\r\n            this.isValueChanged = function () {\r\n                return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\r\n            };\r\n\r\n            this.validate = function () {\r\n                if (args.column.validator) {\r\n                    var validationResults = args.column.validator($input.val(), args);\r\n                    if (!validationResults.valid) {\r\n                        return validationResults;\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    valid: true,\r\n                    msg: null\r\n                };\r\n            };\r\n\r\n            this.init();\r\n        }\r\n    }\r\n}"]}